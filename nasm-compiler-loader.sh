#!/bin/bash
echo " ███▄    █  ▄▄▄        ██████  ███▄ ▄███▓                            "
echo " ██ ▀█   █ ▒████▄    ▒██    ▒ ▓██▒▀█▀ ██▒                            "
echo "▓██  ▀█ ██▒▒██  ▀█▄  ░ ▓██▄   ▓██    ▓██░                            "
echo "▓██▒  ▐▌██▒░██▄▄▄▄██   ▒   ██▒▒██    ▒██                             "
echo "▒██░   ▓██░ ▓█   ▓██▒▒██████▒▒▒██▒   ░██▒                            "
echo "░ ▒░   ▒ ▒  ▒▒   ▓▒█░▒ ▒▓▒ ▒ ░░ ▒░   ░  ░                            "
echo "░ ░░   ░ ▒░  ▒   ▒▒ ░░ ░▒  ░ ░░  ░      ░                            "
echo "   ░   ░ ░   ░   ▒   ░  ░  ░  ░      ░                               "
echo "         ░       ░  ░      ░         ░                               "
echo " ▄████▄   ▒█████   ███▄ ▄███▓ ██▓███   ██▓ ██▓    ▓█████  ██▀███     "
echo "▒██▀ ▀█  ▒██▒  ██▒▓██▒▀█▀ ██▒▓██░  ██▒▓██▒▓██▒    ▓█   ▀ ▓██ ▒ ██▒   "
echo "▒▓█    ▄ ▒██░  ██▒▓██    ▓██░▓██░ ██▓▒▒██▒▒██░    ▒███   ▓██ ░▄█ ▒   "
echo "▒▓▓▄ ▄██▒▒██   ██░▒██    ▒██ ▒██▄█▓▒ ▒░██░▒██░    ▒▓█  ▄ ▒██▀▀█▄     "
echo "▒ ▓███▀ ░░ ████▓▒░▒██▒   ░██▒▒██▒ ░  ░░██░░██████▒░▒████▒░██▓ ▒██▒   "
echo "░ ░▒ ▒  ░░ ▒░▒░▒░ ░ ▒░   ░  ░▒▓▒░ ░  ░░▓  ░ ▒░▓  ░░░ ▒░ ░░ ▒▓ ░▒▓░   "
echo "  ░  ▒     ░ ▒ ▒░ ░  ░      ░░▒ ░      ▒ ░░ ░ ▒  ░ ░ ░  ░  ░▒ ░ ▒░   "
echo "░        ░ ░ ░ ▒  ░      ░   ░░        ▒ ░  ░ ░      ░     ░░   ░    "
echo "░ ░          ░ ░         ░             ░      ░  ░   ░  ░   ░        "
echo "░██▓     ▒█████   ▄▄▄      ▓█████▄ ▓█████  ██▀███                    "
echo "▓██▒    ▒██▒  ██▒▒████▄    ▒██▀ ██▌▓█   ▀ ▓██ ▒ ██▒                  "
echo "▒██░    ▒██░  ██▒▒██  ▀█▄  ░██   █▌▒███   ▓██ ░▄█ ▒                  "
echo "▒██░    ▒██   ██░░██▄▄▄▄██ ░▓█▄   ▌▒▓█  ▄ ▒██▀▀█▄                    "
echo "░██████▒░ ████▓▒░ ▓█   ▓██▒░▒████▓ ░▒████▒░██▓ ▒██▒                  "
echo "░ ▒░▓  ░░ ▒░▒░▒░  ▒▒   ▓▒█░ ▒▒▓  ▒ ░░ ▒░ ░░ ▒▓ ░▒▓░                  "
echo "░ ░ ▒  ░  ░ ▒ ▒░   ▒   ▒▒ ░ ░ ▒  ▒  ░ ░  ░  ░▒ ░ ▒░                  "
echo "  ░ ░   ░ ░ ░ ▒    ░   ▒    ░ ░  ░    ░     ░░   ░                   "
echo "    ░  ░    ░ ░        ░  ░   ░       ░  ░   ░                       "
echo "                            ░                                        "

if [ $# -ne 1 ]
then
    echo "[+] Invalid paramters specified"
    echo "[+] Usage: ./nasm-compiler-loader <filename>"
    exit 1
fi

filename=$(basename $1)
nasm -f elf $1
if [ $? -eq 0 ];
then
    ld -m elf_i386 -s -o $filename $filename.o
    chmod +x $filename
    rm $filename.o
    ./$filename
    rm $filename
fi
